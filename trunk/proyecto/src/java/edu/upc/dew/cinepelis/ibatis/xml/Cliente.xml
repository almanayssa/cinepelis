<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="Cliente" >

    <typeAlias alias="beanCliente" type="edu.upc.dew.cinepelis.model.ClienteBean"/>

     <select id="listarCliente" parameterClass="java.lang.Long" resultClass="beanCliente">
            <![CDATA[
		SELECT nombre, ape_paterno, ape_materno, email
                FROM tb_cliente
                ORDER BY ape_paterno
            ]]>
    </select>


     <!-- retorna un objeto del tipo beanUsuario-->
     <select id="findCustomerByTarjeta" parameterClass="java.lang.Long" resultClass="beanCliente">
	 <![CDATA[
                SELECT *
                FROM tb_cliente
                WHERE num_tarjeta= #value#
	]]>
    </select>

    <insert id="guardarCliente" parameterClass="beanCliente">
        <![CDATA[
		INSERT tb_cliente(nombre, ape_paterno, ape_materno, dni, telefono, email, tipo, num_tarjeta)
                VALUES (#nombre#, #ape_paterno#, #ape_materno#, #dni#, #telefono#, #email#, #tipo_tarjeta#,#num_tarjeta#);
	]]>
        <selectKey resultClass="java.lang.Long" keyProperty="id_cliente" >
            select last_insert_id() as id_cliente
        </selectKey>
    </insert>
    
</sqlMap>    